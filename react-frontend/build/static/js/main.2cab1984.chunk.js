(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{52:function(t,e,n){},53:function(t,e,n){},67:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){"use strict";n.r(e);var a,i,s,c,r=n(0),o=n(26),u=n.n(o),l=(n(52),n(4)),d=n(15),j=n(16),f=n(6),b=(n(53),n(1)),h=function(t){var e=t.handleLogin;return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"typewriter",children:Object(b.jsx)("h1",{children:"Find clusters in your Spotify playlists using ..."})}),Object(b.jsx)("button",{className:"loginButton",onClick:e,children:"Login"})]})},O=n(18),p=n(19),x=p.a.div(a||(a=Object(O.a)(["\n    display: grid;\n    grid-template-columns: 50% 50%;\n"]))),y=p.a.div(i||(i=Object(O.a)(["\n    padding: 1em;\n    margin-top: 3em;\n"]))),m=p.a.img(s||(s=Object(O.a)(["\n    height: 350px;\n    width: 350px;\n    margin-left: 50%;\n    transform: translate(-50%);\n    padding: 1em;\n"]))),g=p.a.div(c||(c=Object(O.a)(["\n    grid-row-start: 1;\n    grid-column-start: 2;\n    margin-top: 5em;\n    padding: 1em;\n    color: white;\n"]))),S=function(t){var e=t.images,n=t.selectPlaylist,a=t.userInfo,i=(t.ids,t.titles),s=t.artists,c=t.features,r=t.TSNEfeatures,o=t.playlistList,u=t.selectedPlaylist,l=t.setSelectPlaylistId,d=(t.getLabels,{dataPointLabels:s.map((function(t,e){return"".concat(t," - ").concat(i[e])})),TSNE_features:r,features:c}),j=Object(f.g)();return Object(b.jsxs)(x,{children:[Object(b.jsx)(y,{children:e.map((function(t,e){return Object(b.jsx)(m,{src:t,alt:"Playlist cover",onClick:function(){n(o.map((function(t){return t.id}))[e]),l(o.map((function(t){return t.id}))[e])}},e)}))}),Object(b.jsxs)(g,{children:[Object(b.jsxs)("h1",{children:["Hi, ",a.display_name]}),Object(b.jsx)("p",{children:"Choose playlist to analyse."}),Object(b.jsxs)("p",{children:["Playlist length: ",i.length]}),Object(b.jsx)("button",{onClick:function(){j.push({pathname:"playlists/".concat(u),data:d})},children:"Plot"})]})]})},v=function(t){var e=t.authenticated,n=t.userInfo,a=t.playlistList,i=t.selectPlaylist,s=t.titles,c=t.features,r=t.TSNEfeatures,o=t.ids,u=t.artists,l=t.selectedPlaylist,d=t.setSelectPlaylistId,j=t.getLabels,h=a.map((function(t){return t.images[0].url}));return e?Object(b.jsx)(S,{images:h,selectPlaylist:i,userInfo:n,titles:s,artists:u,features:c,ids:o,playlistList:a,selectedPlaylist:l,setSelectPlaylistId:d,TSNEfeatures:r,getLabels:j}):Object(b.jsx)(f.a,{to:"/login"})},N=n(47),E=n.n(N);function w(){var t=window;return{width:t.innerWidth,height:t.innerHeight}}var L,T=function(t){var e=t.data,n=t.labels,a=t.Xdim,i=t.Ydim,s=t.Zdim,c=function(){var t=Object(r.useState)(w()),e=Object(l.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){function t(){a(w())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}(),o=c.height,u=c.width,d={tick0:0,tickcolor:"#D3D3D3",tickwidth:2,gridcolor:"#D3D3D3",gridwidth:2,zerolinecolor:"#D3D3D3",zerolinewidth:2};return Object(b.jsx)(E.a,{config:{displayModeBar:!1},data:[{x:a,y:i,z:s,type:"scatter3d",mode:"markers",marker:{color:n,symbol:"circle"},hoverlabel:{bgcolor:"grey"},hoverinfo:"text",text:e.dataPointLabels}],layout:{displayModeBar:!1,margin:{pad:20},width:u,height:o,paper_bgcolor:"black",scene:{aspectmode:"auto",yaxis:d,xaxis:d,zaxis:d}}})},P=n.p+"static/media/demo-loader.67b2533e.svg",_=p.a.div(L||(L=Object(O.a)(["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n"]))),k=function(){return Object(b.jsx)(_,{children:Object(b.jsx)("object",{type:"image/svg+xml",data:P,children:"svg-animation"})})},I=(n(67),n(68),n(41)),C=n(31),D=n(32),z=function(t){var e=t.getLabels,n=t.labels,a={TSNE1:{array:"TSNE_features",index:0},TSNE2:{array:"TSNE_features",index:1},TSNE3:{array:"TSNE_features",index:2},acousticness:{array:"features",index:0},danceability:{array:"features",index:1},energy:{array:"features",index:2},instrumentalness:{array:"features",index:3},liveness:{array:"features",index:4},loudness:{array:"features",index:5},speechiness:{array:"features",index:6},tempo:{array:"features",index:7},valence:{array:"features",index:8}},i=Object(r.useState)([]),s=Object(l.a)(i,2),c=s[0],o=s[1],u=Object(r.useState)([]),d=Object(l.a)(u,2),j=d[0],h=d[1],O=Object(r.useState)([]),p=Object(l.a)(O,2),x=p[0],y=p[1],m=Object(r.useState)([]),g=Object(l.a)(m,2),S=g[0],v=g[1],N=Object(r.useState)("TSNE1"),E=Object(l.a)(N,2),w=E[0],L=E[1],P=Object(r.useState)("TSNE2"),_=Object(l.a)(P,2),z=_[0],M=_[1],X=Object(r.useState)("TSNE3"),Y=Object(l.a)(X,2),B=Y[0],J=Y[1],H=Object(f.h)();Object(r.useEffect)((function(){o(H.data),h(H.data.TSNE_features.map((function(t){return t[0]}))),y(H.data.TSNE_features.map((function(t){return t[1]}))),v(H.data.TSNE_features.map((function(t){return t[2]})))}),[H.data,c]);var K=function(t){return"X axis"===t?w:"Y axis"===t?z:B};return void 0===c.TSNE_features?Object(b.jsx)(k,{}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"buttonContainer",children:[["X axis","Y axis","Z axis"].map((function(t,e){return Object(b.jsxs)("div",{style:{color:"white"},children:[t,Object(b.jsx)(I.a,{title:K(t),children:Object.entries(a).map((function(e){var n=Object(l.a)(e,2),a=n[0],i=n[1];return Object(b.jsx)("div",{children:Object(b.jsx)(C.a.Item,{eventKey:a,onClick:function(){!function(t,e,n){"X axis"===t?(h(c[e.array].map((function(t){return t[e.index]}))),L(n)):"Y axis"===t?(y(c[e.array].map((function(t){return t[e.index]}))),M(n)):(v(c[e.array].map((function(t){return t[e.index]}))),J(n))}(t,i,a)},children:a})},a)}))})]},e)})),Object(b.jsx)(I.a,{title:"Model Selector",children:Object.keys({"K-means":{params:{n_clusters:0}},"Affinity Propagation":{params:{max_iter:5e3,convergence_iter:150}},"Mean Shift":{params:{n_jobs:-1}}}).map((function(t,n){return Object(b.jsx)(D.a,{eventKey:t,onClick:function(){return e(t)},children:t},n)}))})]}),Object(b.jsx)(T,{data:c,labels:n,Xdim:j,Ydim:x,Zdim:S})]})},M=(n(70),function(){return Object(b.jsxs)("div",{className:"bar",children:[Object(b.jsx)(d.b,{to:"/",children:"Home"}),Object(b.jsx)(d.b,{to:"/notes",children:"Login"}),Object(b.jsx)(d.b,{to:"/users",children:"About"})]})}),X=(n(71),function(t){var e=t.loading,n=t.showLoading,a=t.hideLoading,i=Object(r.useState)(!1),s=Object(l.a)(i,2),c=s[0],o=s[1],u=Object(r.useState)([]),d=Object(l.a)(u,2),O=d[0],p=d[1],x=Object(r.useState)({}),y=Object(l.a)(x,2),m=y[0],g=y[1],S=Object(r.useState)([]),N=Object(l.a)(S,2),E=N[0],w=N[1],L=Object(r.useState)([]),T=Object(l.a)(L,2),P=T[0],_=T[1],I=Object(r.useState)([]),C=Object(l.a)(I,2),D=C[0],X=C[1],Y=Object(r.useState)(""),B=Object(l.a)(Y,2),J=B[0],H=B[1],K=Object(r.useState)([]),Z=Object(l.a)(K,2),A=Z[0],F=Z[1],W=Object(r.useState)([]),q=Object(l.a)(W,2),G=q[0],Q=q[1],R=Object(r.useState)([]),U=Object(l.a)(R,2),V=U[0],$=U[1];Object(r.useEffect)((function(){fetch("/spotify/is-authenticated").then((function(t){return t.json()})).then((function(t){console.log("authentication status: ".concat(t.status)),o(t.status),a()}))}),[]),Object(r.useEffect)((function(){c&&(fetch("/spotify/playlists").then((function(t){return t.json()})).then((function(t){var e=t.playlists.items.map((function(t){return t.id}));X(e),p(t.playlists.items)})),fetch("/spotify/user-profile").then((function(t){return t.json()})).then((function(t){g(t.user_profile),a()})))}),[c]);var tt=function(t){n(),fetch("/spotify/get-labels",{method:"POST",headers:{"Content-Type":"application/json",Model:t},body:JSON.stringify(A)}).then((function(t){return t.json()})).then((function(t){$(t),a()}))},et=Object(f.i)("/playlists/:id"),nt=et?O.find((function(t){return t.id===Number(et.params.id)})):null;return e?Object(b.jsx)(k,{}):Object(b.jsxs)("div",{children:[Object(b.jsx)(M,{}),Object(b.jsxs)(f.d,{children:[Object(b.jsx)(f.b,{path:"/playlists/:id",children:Object(b.jsx)(z,{id:nt,getLabels:tt,labels:V})}),Object(b.jsx)(f.b,{path:"/login",children:Object(b.jsx)(h,{handleLogin:function(){return fetch("/spotify/is-authenticated").then((function(t){return t.json()})).then((function(t){t.status||fetch("/spotify/get-auth-url").then((function(t){return t.json()})).then((function(t){o(!0),window.location.replace(t.url)}))}))}})}),Object(b.jsx)(f.b,{path:"/",children:Object(b.jsx)(v,{authenticated:c,userInfo:m,playlistList:O,selectPlaylist:function(t){n(),w([]),_([]),F([]),Q([]),X([]),$([]);var e=[];return function t(n){return fetch("/spotify/get-track-ids",{headers:{url:n}}).then((function(t){return t.json()})).then((function(n){if(console.log(n),w((function(t){return[].concat(Object(j.a)(t),Object(j.a)(n.title))})),_((function(t){return[].concat(Object(j.a)(t),Object(j.a)(n.artist))})),F((function(t){return[].concat(Object(j.a)(t),Object(j.a)(n.features))})),X((function(t){return[].concat(Object(j.a)(t),Object(j.a)(n.track_ids))})),e.push(n.features),n.next_url){var a=n.next_url.replace("https://api.spotify.com/v1","");return t(a)}return fetch("/spotify/get-dimension-reduction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.flat())}).then((function(t){return t.json()})).then((function(t){Q(t)}))}))}("/playlists/".concat(t,"/tracks/?offset=0&limit=100")).then((function(){a()}))},titles:E,artists:P,features:A,TSNEfeatures:G,ids:D,selectedPlaylist:J,setSelectPlaylistId:function(t){H(t)},getLabels:tt})})]})]})}),Y=function(){var t=Object(r.useState)(!0),e=Object(l.a)(t,2),n=e[0],a=e[1];return Object(b.jsx)(d.a,{children:Object(b.jsx)(X,{loading:n,showLoading:function(){return a(!0)},hideLoading:function(){return a(!1)}})})};u.a.render(Object(b.jsx)(Y,{}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.2cab1984.chunk.js.map